<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="420" viewBox="0 0 1200 420" role="img" aria-label="QuantOracle EOD architecture">
  <defs>
    <style>
      .bg{fill:#0b1220}
      .card{fill:#111a2e;stroke:#2a3a63;stroke-width:2}
      .title{fill:#e5e7eb;font:700 20px ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
      .txt{fill:#cbd5e1;font:500 14px ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
      .muted{fill:#94a3b8;font:500 12px ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
      .pill{fill:#0f254a;stroke:#2d5aa7;stroke-width:1.5}
      .pillTxt{fill:#bfdbfe;font:700 12px ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;letter-spacing:.3px}
      .arrow{stroke:#60a5fa;stroke-width:3;fill:none;marker-end:url(#m)}
    </style>
    <marker id="m" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#60a5fa"/>
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="420"/>
  <text class="title" x="40" y="50">QuantOracle — EOD Publisher → Streamlit UI</text>
  <text class="muted" x="40" y="74">Published artifacts keep the UI fast and deterministic (no training in Streamlit).</text>

  <!-- Publisher -->
  <rect class="card" x="40" y="110" width="420" height="250" rx="16"/>
  <text class="title" x="70" y="150">Publisher (GitHub Actions)</text>
  <rect class="pill" x="70" y="170" width="150" height="26" rx="13"/>
  <text class="pillTxt" x="85" y="188">After market close</text>

  <text class="txt" x="70" y="222">1) Fetch EOD candles</text>
  <text class="muted" x="90" y="244">Groww Trade API (NSE cash equities/ETFs)</text>
  <text class="txt" x="70" y="272">2) Build features snapshot</text>
  <text class="muted" x="90" y="294">features.parquet (DuckDB-readable)</text>
  <text class="txt" x="70" y="322">3) Train ridge model</text>
  <text class="muted" x="90" y="344">model.npz + meta.json + LATEST</text>

  <!-- Storage -->
  <rect class="card" x="500" y="150" width="300" height="170" rx="16"/>
  <text class="title" x="530" y="190">Supabase Storage</text>
  <text class="txt" x="530" y="226">eod/&lt;universe&gt;/features.parquet</text>
  <text class="txt" x="530" y="252">eod/&lt;universe&gt;/models/…</text>
  <text class="txt" x="530" y="278">eod/&lt;universe&gt;/latest.json</text>
  <text class="muted" x="530" y="304">“latest.json” uploaded last (last-good snapshot)</text>

  <!-- UI -->
  <rect class="card" x="840" y="110" width="320" height="250" rx="16"/>
  <text class="title" x="870" y="150">UI (Streamlit Cloud)</text>
  <rect class="pill" x="870" y="170" width="170" height="26" rx="13"/>
  <text class="pillTxt" x="885" y="188">No training in UI</text>

  <text class="txt" x="870" y="222">1) Sync latest artifacts</text>
  <text class="muted" x="890" y="244">latest.json + features + model files</text>
  <text class="txt" x="870" y="272">2) Render screener</text>
  <text class="muted" x="890" y="294">top/bottom ranks + long/short</text>
  <text class="txt" x="870" y="322">3) Explore markets/risk</text>
  <text class="muted" x="890" y="344">charts + portfolio + risk metrics</text>

  <!-- arrows -->
  <path class="arrow" d="M 460 235 C 500 235, 480 235, 500 235"/>
  <path class="arrow" d="M 800 235 C 840 235, 820 235, 840 235"/>
</svg>

